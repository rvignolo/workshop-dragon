# Workshop: Learning DRAGON V5 as a Production Code for Cross-Sections

**Meeting:** III Annual Meeting of the Argentinean Group of Calculation and Reactor Analysis.

**Date:** November 17, 2016.

**Location:** Central Headquarters of the National Atomic Energy Commission.

**Total Duration:** 6 hours.

**Instructor:** Ramiro Vignolo.

## Abstract

DRAGON contains a series of models that enable the simulation of neutron behavior in a nuclear reactor fuel cell or fuel element. This code includes the main features of a cell code: interpolation of microscopic cross-sections obtained from libraries; self-shielding calculations in multidimensional geometries; multigroup and multidimensional neutron flux calculations; homogenization of nuclear properties for core calculations and isotopic depletion. In this workshop, participants will learn to use the DRAGON cell code in its fifth version, covering the different stages that constitute a generic input and performing various examples that reinforce the understanding of each of them. Finally, the use of external tools recommended by the developers as well as by the workshop instructors will be addressed.

## General Considerations

1. The main directory contains various folders with DRAGON inputs and scripts organized in 5 numbered directories. The numbering respects the order in which the workshop topics will be addressed.

2. It is recommended to have GhostView installed for PostScript visualization and gnuplot for 2D and 3D plotting. However, if you have pyxplot available, 2D plots will be generated using this program instead of gnuplot.

3. As a text editor, the use of Kate is recommended since we have written [syntax highlighting](https://github.com/rvignolo/dragon-highlighting) for DRAGON.

4. It is necessary to have DRAGON installed globally and accessible via the `dragon` command. It can be downloaded from the [Merlin server](http://www.polymtl.ca/merlin/version5.htm).

5. In the [downloads section](https://bitbucket.org/rvignolo/taller-dragon-garcar-2016/downloads), you will find slides that can be used to accompany the workshop reading.

## File Description

The numbered directories from `1.` to `5.` contain the complete practical part of the workshop, including DRAGON inputs and scripts. In the generic case, a directory may contain the following files:

1. A file with `.x2m` extension that corresponds to the DRAGON input.

2. One or more files with `.c2m` extension that correspond to DRAGON procedures.

3. `clean.sh` cleans the information obtained after running an input (note that you can modify this script as needed).

4. A script called `run.sh` that properly executes the DRAGON input. Additionally, if the `-g` option is given, it will display PostScript outputs in GhostView. Furthermore, if necessary, it will call other scripts detailed below.

5. `xs-plot.sh` generates cross-section plots in gnuplot or pyxplot and in 2D and 3D as appropriate.

6. `compile.sh` compiles C routines using GanLib libraries.

After executing the `run.sh` script in each directory, in the most general case, files of the following type will be obtained:

1. The file with `.result` extension contains the DRAGON output.

2. Files with `.ps` extension contain geometry plots with region distribution, mixtures, or flux.

3. The file with `.m` extension contains ray tracing information that can be plotted in Matlab or Octave.

4. `Database.dat` corresponds to the file generated by the `COMPO:` module of DRAGON and converted to ASCII. This file is the input for C routines that use GanLib to extract relevant information from a run.

5. Other files with `.dat` extension contain cross-section information after processing `Database.dat` with the C routines.

## Directory Description

Each workshop directory will be briefly and individually explained.

### `1.materials`

This directory contains two subdirectories, `1.macroscopic` and `2.microscopic`, where the input format for the `MAC:` and `LIB:` modules respectively is specified. Particular attention should be paid to, for example, the format of scattering cross-sections and the results of the runs.

### `2.geometries-and-tracking`

This directory contains inputs that describe different types of geometries, to which different ray tracing modules can be applied. It is important to analyze each of the geometries and understand both material definitions and boundary conditions. Once each of these cases is understood, propose a geometry and try to implement it.

### `3.flux-calculation`

Flux calculation is proposed in the same geometry but defined in different ways. Compare the results and understand the use of DRAGON's new tools, such as the `G2S:` and `SALT:` modules.

### `4.reference-burnup`

The reference burnup is, precisely, a run that performs isotopic evolution. The output of this run consists of cross-sections as a function of burnup. The important aspects are understanding both the algorithm used for burning and the tools employed to collect the information.

### `5.local-perturbations`

Local perturbations take the reference burnup and traverse it while locally perturbing some parameter. This allows obtaining cross-sections as a function of burnup and a local perturbation. By post-processing these values, it is possible to obtain, for example, the derivatives of cross-sections with respect to the local parameter as a function of burnup.
